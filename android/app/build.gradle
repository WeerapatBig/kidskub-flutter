plugins {
    id "com.android.application"
    id "kotlin-android"
    // The Flutter Gradle Plugin must be applied after the Android and Kotlin Gradle plugins.
    id "dev.flutter.flutter-gradle-plugin"
    id("org.jetbrains.kotlin.android")
}

android {
    namespace = "com.example.firstly"
    compileSdk = 35 // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î compileSdk ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á)
    ndkVersion = "25.1.8937393" // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î ndkVersion ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ

    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_17
        targetCompatibility = JavaVersion.VERSION_17
    }

    kotlinOptions {
        jvmTarget = "17" // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ
    }

    defaultConfig {
        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).
        applicationId = "com.example.firstly"
        // You can update the following values to match your application needs.
        // For more information, see: https://flutter.dev/to/review-gradle-config.
        minSdkVersion 21 // ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ
        targetSdkVersion 35 // ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ
        
        versionCode = 1 // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î versionCode ‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ
        versionName = "1.0" // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î versionName ‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ
    }

    // üîπ ‡πÄ‡∏û‡∏¥‡πà‡∏° `flavorDimensions` ‡πÅ‡∏•‡∏∞ `productFlavors`
    flavorDimensions "mode"

    productFlavors {
        full {
            dimension "mode"
            applicationIdSuffix ".full"
            versionNameSuffix "-full"
            resValue "string", "app_name", "KidsKub"
        }
        kidsKubDebug {
            dimension "mode"
            applicationIdSuffix ".kidskubdebug"
            versionNameSuffix "-kidskubdebug"
            resValue "string", "app_name", "KidsKub Debug"
        }
    }

    buildTypes {
        release {
            // TODO: Add your own signing config for the release build.
            // Signing with the debug keys for now, so `flutter run --release` works.
            signingConfig = signingConfigs.debug
        }
    }

    android.applicationVariants.all { variant ->
        variant.outputs.all { output ->
            if (variant.flavorName == "full") {
                output.outputFileName = "Full_Game.apk" // ‚úÖ ‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏õ‡∏´‡∏•‡∏±‡∏Å
            } else if (variant.flavorName == "test") {
                output.outputFileName = "Test_App.apk" // ‚úÖ ‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏õ Test App
            }
        }
    }
}

flutter {
    source = "../.."
}

dependencies {
    implementation "androidx.fragment:fragment:1.6.0"
    implementation "org.jetbrains.kotlin:kotlin-stdlib:1.8.22"

    // ‡∏•‡∏≠‡∏á exclude libraries ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤
    configurations.all {
        exclude group: "androidx.lifecycle", module: "lifecycle-viewmodel-savedstate"
        exclude group: "androidx.activity", module: "activity-ktx"
    }
}